<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palette</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<style>
    body {
        text-align: center;
        color: var(--tg-theme-text-color);
        background: var(--tg-theme-bg-color);
        font-family: 'Roboto Condensed', sans-serif;
    }

    input {
        text-align: center;
        width: 100%;
        height: 100px;
        background: var(--tg-theme-button-color);
	    color: var(--tg-theme-button-text-color);
    }

    button {
            display: block;
            width: 100%;
            margin: 15px 0;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            font-size: larger;
            background-color: var(--tg-theme-button-color, #50a8eb);
            color: var(--tg-theme-button-text-color, #ffffff);
            cursor: pointer;
        }

    .palette {
        display: flex;
        justify-content: center;
        text-align: center;
    }

    label {
        font-size: large;
    }

    div.color {
        position: relative;
        width: 20%;
        aspect-ratio: 1;
    }

</style>

<body>
    <!-- <h1>Choose your palette:</h1> -->

    <main>
    <div class="palette">
        <div class="color">
            <input type="color" id="bg" name="bg" value="#ffa656">
            <!-- <label for="bg" id="bg-text">Background color</label> -->
        </div>

        <div class="color">
            <input type="color" id="primary" name="primary" value="#ff6600">
            <!-- <label for="primary" id="primary-text">Primary color</label> -->
        </div>

        <div class="color">
            <input type="color" id="secondary" name="secondary" value="#ffd084">
            <!-- <label for="secondary" id="secondary-text">Secondary color</label> -->
        </div>

        <div class="color">
            <input type="color" id="accent" name="accent" value="#3d0606">
            <!-- <label for="accent" id="accent-text">Accent color</label> -->
        </div>

        <div class="color">
            <input type="color" id="additional" name="additional" value="#822900">
            <!-- <label for="additional" id="additional-text">Additional color</label> -->
        </div>
    </div>
    <button onclick="savePalette()">Save palette</button>

    </main>

</body>

<script>
    window.addEventListener("load", (event) => {
        let color = document.cookie.split(";")[0];
        let colorValues = color.split("=")[1].split(",");
        
        console.log(colorValues);
        document.getElementById("bg").value = colorValues[0];
        document.getElementById("primary").value = colorValues[1];
        document.getElementById("secondary").value = colorValues[2];
        document.getElementById("accent").value = colorValues[3];
        document.getElementById("additional").value = colorValues[4];
    });

    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    function savePalette() {
        let data = {
            "bg": document.getElementById("bg").value,
            "primary": document.getElementById("primary").value,
            "secondary": document.getElementById("secondary").value,
            "accent": document.getElementById("accent").value,
            "additional": document.getElementById("additional").value
        }
        document.cookie = `color=${Object.values(data).join(",")}; expires=${365*24*60*60}; path=/`;
	    Telegram.WebApp.sendData(JSON.stringify(data)); 
        Telegram.WebApp.close();
    }
</script>
</html>
